(this.webpackJsonppractica_1=this.webpackJsonppractica_1||[]).push([[0],{22:function(e,t,n){},27:function(e,t,n){e.exports=n(39)},32:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(14),a=n.n(o),s=(n(32),n(3)),c=n(4),u=n(7),l=n(5),p=n(6),h=n(23),d=n(16),f=n(12),m=n(15),b="QUESTION_ANSWER",v="CHANGE_QUESTION",g="SUBMIT",y="INIT_QUESTIONS",O="TIMER_REFRESH",E="IS_FETCHING",j="FETCH_ERROR",k="RESET",Q="170928d0aade25dc7cc5";function w(e,t){return console.log("question answer!"),{type:b,payload:{index:e,answer:t}}}function C(e){return console.log("submit!"),{type:g,payload:{questions:e}}}function S(e){return{type:O,payload:{timeLeft:e}}}function q(e){return console.log("fetchQuestions action!"),{type:E,payload:{isFetching:e}}}function T(){return{type:k}}function N(){return function(e){return e(q(!0)),fetch("https://quiz.dit.upm.es/api/quizzes/random10wa?token="+Q).then((function(e){if(!e.ok)throw console.log("error fetching"),Error(e);return e})).then((function(e){return e.json()})).then((function(t){if(t.length<=0)return console.log("**************REINTENTANDO FETCH DATA FROM SERVER**************"),void e(N());console.log("questions :",t),e(function(e){return console.log("initQuestions action!"),{type:y,payload:{questions:e}}}(t)),e(q(!1))})).catch((function(t){console.log("error fetchDataFromServer:",t),e(function(e){return{type:j,payload:{error:e}}}(t))}))}}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var R=Object(f.c)({score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g:var n=0;return t.payload.questions.map((function(e,t){e.answer===e.userAnswer&&n++})),n;case k:return 0;default:return e}},finished:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case g:return!0;case k:return!1;default:return e}},currentQuestion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case v:return t.payload.index;case k:return 0;default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case b:return e.map((function(e,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{userAnswer:t.payload.index===n?t.payload.answer:e.userAnswer})}));case y:return t.payload.questions;default:return e}},timeLeft:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:120;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case O:return e-1;case k:return 120;default:return e}},fetching:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case E:return t.payload.isFetching;case k:return!0;default:return e}},fetchError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case j:return t.payload.error;case k:return null;default:return e}},availableQuestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case y:return t.payload.questions.length;default:return e}},isResetting:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case k:return!0;case y:return!1;default:return e}}}),I=n(8),A=(n(22),n(42)),D=n(43),L={color:"red"},x=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("button",{style:L}," ",this.props.buttonType)}}]),t}(i.a.Component),F={color:"green"},_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).click=n.click.bind(Object(I.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"click",value:function(){this.props.changeQuestion(this.props.targetQuestionId)}},{key:"render",value:function(){return i.a.createElement("button",{disabled:this.props.disable,style:F,onClick:this.click}," ",this.props.direction," ")}}]),t}(x),G={color:"blue"},U=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onSubmit=n.onSubmit.bind(Object(I.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onSubmit",value:function(){this.props.onSubmitPress()}},{key:"render",value:function(){return i.a.createElement("button",{onClick:this.onSubmit,style:G},"Submit")}}]),t}(x),H=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onClick=n.onClick.bind(Object(I.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"questionSelected",value:function(){this.props.changeQuestion(this.props.direction)}},{key:"onClick",value:function(e){this.props.onQuestionSelect(parseInt(e.target.id))}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.availableQuestions;t++)e.push(i.a.createElement("button",{key:t,id:t,onClick:this.onClick},t+1));return i.a.createElement("div",null,e)}}]),t}(i.a.Component),M=n(40),z=n(41),B=(n(38),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.tips.map((function(e,t){return i.a.createElement(D.a,{border:"info",class:"tips",key:t,style:{width:"18rem",height:"4rem"}},e)}));return i.a.createElement("div",null,e)}}]),t}(i.a.Component)),W=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onSubmitPress=n.onSubmitPress.bind(Object(I.a)(n)),n.changeQuestion=n.changeQuestion.bind(Object(I.a)(n)),n.onTimeCountChange=n.onTimeCountChange.bind(Object(I.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onSubmitPress",value:function(){this.props.onSubmitPress()}},{key:"changeQuestion",value:function(e){this.props.changeQuestion(e)}},{key:"onTimeCountChange",value:function(){this.props.onTimeCountChange()}},{key:"render",value:function(){var e=this,t=null,n=null;try{t=this.props.question.attachment.url}catch(r){}try{n=this.props.question.author.photo.url}catch(r){}return i.a.createElement("div",{className:"game"},i.a.createElement(M.a,{className:"card"},i.a.createElement("div",{className:"question"},i.a.createElement("p",null,"QUESTION: ",i.a.createElement("b",null,this.props.question.question))),i.a.createElement("div",{className:"options"},i.a.createElement("div",null,i.a.createElement("input",{type:"text",placeholder:"Type your answer here ",value:this.props.question.userAnswer||"",onChange:function(t){e.props.onQuestionAnswer(t.target.value)}})),i.a.createElement("div",null,i.a.createElement(U,{onSubmitPress:this.onSubmitPress})),i.a.createElement("div",null,i.a.createElement(_,{changeQuestion:this.changeQuestion,direction:"Previous question",disable:this.props.firstQuestion,targetQuestionId:this.props.currentQuestion-1}),i.a.createElement(_,{changeQuestion:this.changeQuestion,direction:"Next question",disable:this.props.lastQuestion,targetQuestionId:this.props.currentQuestion+1}))),i.a.createElement("div",null,i.a.createElement(H,{availableQuestions:this.props.availableQuestions,onQuestionSelect:this.changeQuestion})),i.a.createElement(B,{tips:this.props.question.tips})),i.a.createElement(M.a,{className:"questionImage"},null!=t&&i.a.createElement(z.a,{src:this.props.question.attachment.url,fluid:!0,alt:this.props.question.attachment.filename})),i.a.createElement(M.a,{className:"card"},i.a.createElement("div",null,"Autor: ",i.a.createElement("b",null,this.props.question.author.username)),i.a.createElement("div",null,null!=n&&i.a.createElement("div",{className:"thumbnail"},i.a.createElement(z.a,{src:this.props.question.author.photo.url,thumbnail:!0})))))}}]),t}(i.a.Component),J={backgroundColor:"light-red",color:"black"},V=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onReset=n.onReset.bind(Object(I.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onReset",value:function(){this.props.onReset()}},{key:"render",value:function(){return i.a.createElement("button",{onClick:this.onReset,style:J},"Reset Game")}}]),t}(x);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var K=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onTimeCountChange=n.onTimeCountChange.bind(Object(I.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"startGame",value:function(){var e=this;this.props.dispatch(N()),this.interval=setInterval((function(){e.props.dispatch(S(e.props.timeLeft))}),1e3),this.timeout=setInterval((function(){e.props.dispatch(C(e.props.questions))}),1e3*this.props.timeLeft)}},{key:"componentDidMount",value:function(){this.startGame()}},{key:"componentDidUpdate",value:function(){this.props.isResetting&&(clearInterval(this.interval),clearTimeout(this.timeout),this.startGame())}},{key:"onTimeCountChange",value:function(){this.props.timeLeft<=0?(this.props.dispatch(C(this.props.questions)),this.props.dispatch(S(this.props.timeLeft))):this.props.dispatch(S(this.props.timeLeft))}},{key:"render",value:function(){var e=this;return null!=this.props.fetchError?i.a.createElement("div",null,"error: ",this.props.fetchError):this.props.fetching?i.a.createElement("div",{className:"loading"},i.a.createElement(A.a,{animation:"border"})):this.props.questions.length<=0?i.a.createElement("div",null," Ninguna pregunta en el servidor!"):this.props.finished?i.a.createElement("div",{className:"container"},"score:",this.props.score," ",i.a.createElement("br",null),i.a.createElement(V,{onReset:function(){e.props.dispatch(T())}})):i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:"container"},i.a.createElement("div",null,i.a.createElement(V,{onReset:function(){e.props.dispatch(T())}})),i.a.createElement(D.a.Title,null,"Pregunta n\xba ",this.props.currentQuestion+1),i.a.createElement("blockquote",{className:"blockquote mb-0 card-body"},i.a.createElement("div",null,"Time left: ",this.props.timeLeft),i.a.createElement(W,{question:this.props.questions[this.props.currentQuestion],appTextChange:function(t){e.props.dispatch(w(e.props.currentQuestion,t))},onQuestionAnswer:function(t){e.props.dispatch(w(e.props.currentQuestion,t))},onSubmitPress:function(){e.props.dispatch(C(e.props.questions))},changeQuestion:function(t){e.props.dispatch(function(e){return{type:v,payload:{index:e}}}(t))},firstQuestion:0===this.props.currentQuestion,lastQuestion:this.props.currentQuestion===this.props.questions.length-1,onTimeCountChange:this.onTimeCountChange,timeLeft:this.props.timeLeft,finished:this.props.finished,availableQuestions:this.props.availableQuestions,currentQuestion:this.props.currentQuestion}),i.a.createElement("footer",{className:"blockquote-footer"},i.a.createElement("small",{className:"text-muted"},"Quiz developed by ",i.a.createElement("cite",{title:"Source Title"},"Guillermo Mej\xedas & Adri\xe1n Sim\xf3n"))))))}}]),t}(i.a.Component);var X=Object(d.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}))(K),Y=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).initialState={score:0,finished:!1,currentQuestion:0,questions:[],availableQuestions:[],timeLeft:10,fetching:!1,fetchError:null,isResetting:!1},n.store=n.configureStore(),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(d.a,{store:this.store},i.a.createElement("div",{style:{height:"100%"}},i.a.createElement(X,{store:this.store})))}},{key:"configureStore",value:function(){return Object(f.d)(R,Object(f.a)(h.a))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.a67270d5.chunk.js.map